import React from "react";
import { shallow } from "enzyme";
import { View } from "react-native";
import { shallowToJson } from "enzyme-to-json";

import { withRiver } from "../index";

const rivers = {
  A123: {
    id: "A123",
  },
  B345: {
    id: "B345",
  },
};

const TestComponent = jest.fn(props => <View />);

describe("withRiver HoC", () => {
  const WrappedComponent = withRiver(TestComponent);
  const wrapper = shallow(
    <WrappedComponent screenId="A123" rivers={rivers} otherProp="otherProp" />
  );

  it("renders correctly", () => {
    expect(shallowToJson(wrapper)).toMatchSnapshot();
  });

  it("populates the river prop", () => {
    expect(wrapper.find(TestComponent).prop("river")).toEqual(rivers.A123);
  });
});
