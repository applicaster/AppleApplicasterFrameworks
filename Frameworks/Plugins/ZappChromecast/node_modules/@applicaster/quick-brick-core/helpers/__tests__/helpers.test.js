import { mergeUiComponentPlugins } from "../index";

const plugins = [
  {
    type: "data_source_provider",
    name: "applicaster",
    module: jest.fn(),
  },
  {
    type: "ui_component",
    name: "hero",
    module: () => "from plugins",
  },
  {
    type: "ui_component",
    name: "fixtures",
    module: () => {},
  },
];

const components = {
  hero: () => "from components",
  grid: () => {},
};

describe("mergeUiComponentPlugins", () => {
  const mergedComponents = mergeUiComponentPlugins(components, plugins);

  it("adds the ui_component plugins to the components map", () => {
    expect(Object.keys(mergedComponents).length).toEqual(3);

    expect(mergedComponents).toEqual({
      hero: expect.any(Function),
      grid: expect.any(Function),
      fixtures: expect.any(Function),
    });
  });

  it("overrides existing components with the ones provided through plugins", () => {
    expect(mergedComponents.hero()).toEqual("from plugins");
  });
});
