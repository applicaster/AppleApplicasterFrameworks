export class ZappPipesAdapter {
  constructor({ bootstrapper } = {}) {
    if (!bootstrapper || !(typeof bootstrapper === "function")) {
      throw new Error(
        "ZappPipesAdapter requires a bootstrapper function as argument"
      );
    }

    this.bootstrapper = bootstrapper;
  }

  bootstrap(cachedProviders) {
    const { get } = this.bootstrapper(cachedProviders);
    this._get = get;
  }

  get(dataSourceUrl, callback) {
    if (!this._get) {
      throw new Error(
        "ZappPipes engine is not bootstrapped - did you forget to call this.bootstrap(cachedProviders) ?"
      );
    }

    this._get(dataSourceUrl, callback);
  }
}
