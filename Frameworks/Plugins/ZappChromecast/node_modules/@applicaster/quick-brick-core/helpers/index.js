// @flow

/**
 * quick-brick-core module
 * @module @applicaster/quick-brick-core/helpers
 * this module provides helpers for the QuickBrick App
 */

import * as R from "ramda";

/**
 * merges ui_component plugins to the provided components map
 * @param {Object} components map of UI components
 * @param {Array} plugins added to the app
 * @returns {Object} merged components map
 */
export function mergeUiComponentPlugins(components, plugins) {
  return R.compose(
    R.merge(components),
    R.compose(
      R.mapObjIndexed(R.prop("module")),
      R.chain(R.zipObj, R.map(R.prop("name")))
    ),
    R.filter(R.propEq("type", "ui_component"))
  )(plugins);
}
