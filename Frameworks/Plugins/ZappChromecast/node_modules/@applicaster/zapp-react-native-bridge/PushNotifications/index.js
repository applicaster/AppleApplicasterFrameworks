import { NativeModules } from "react-native";

// eslint-disable-next-line prefer-promise-reject-errors
const nullPromise = () => Promise.reject("Push Notification bridge is null");
const defaultPushNotification = {
  registerTags: nullPromise,
  unregisterTags: nullPromise,
  getRegisteredTags: nullPromise,
};

const { PushBridge = defaultPushNotification } = NativeModules;

export const pushBridge = {
  /**
   * Register push tags to push notification provider
   * @param  {String} tags Tags array to reginster
   */
  async registerTags(tags) {
    try {
      return PushBridge.registerTags(tags);
    } catch (e) {
      throw e;
    }
  },

  /**
   * Unregister push tags to push notification provider
   * @param  {String} tags Tags array to reginster
   */
  async unregisterTags(tags) {
    try {
      return PushBridge.unregisterTags(tags);
    } catch (e) {
      throw e;
    }
  },

  /**
   * Retrieve tags from push providers
   */
  async getRegisteredTags() {
    try {
      return PushBridge.getRegisteredTags();
    } catch (e) {
      throw e;
    }
  },
};
