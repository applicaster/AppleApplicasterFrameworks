import { verifyAssets } from "../protectHelper";

const noAssets = [];

const assetsNoAssetsKey = [
  {
    position: "1"
  }
];

const assetsNoAssetsIconInAssetsKey = [
  {
    assets: {
      name: "someName"
    }
  }
];

const assetsNoAssetsIconValueInAssetsKey = [
  {
    assets: {
      icon: ""
    }
  }
];

const correctIcon = [
  {
    assets: {
      icon:
        "https://assets-secure.applicaster.com/zapp/assets/app_family/286/video_image___.png"
    }
  }
];

const correctSplash = [
  {
    universal: {
      splash: "https://assets-secure.applicaster.com/myLogo.png"
    }
  }
];

describe("verifyAssets for icon", () => {
  it("Protect app incase of nulls", () => {
    expect(verifyAssets(noAssets, [0, "assets", "icon"])).toEqual("");
  });

  it("Protects incase of missing assets key", () => {
    expect(verifyAssets(assetsNoAssetsKey, [0, "assets", "icon"])).toEqual("");
  });

  it("Protects incase of missing icon in assets key", () => {
    expect(
      verifyAssets(assetsNoAssetsIconInAssetsKey, [0, "assets", "icon"])
    ).toEqual("");
  });

  it("Protects incase of missing icon in assets key", () => {
    expect(
      verifyAssets(assetsNoAssetsIconValueInAssetsKey, [0, "assets", "icon"])
    ).toEqual("");
  });

  it("Protects incase of missing icon in assets key", () => {
    expect(verifyAssets(correctIcon, [0, "assets", "icon"])).toEqual(
      "https://assets-secure.applicaster.com/zapp/assets/app_family/286/video_image___.png"
    );
  });
});

describe("verifyAssets for splash", () => {
  it("Protect app incase of nulls", () => {
    expect(verifyAssets(noAssets, [0, "universal", "splash"])).toEqual("");
  });

  it("Protects incase of missing assets key", () => {
    expect(verifyAssets(assetsNoAssetsKey, [0, "universal", "splash"])).toEqual(
      ""
    );
  });

  it("Protects incase of missing splash in assets key", () => {
    expect(
      verifyAssets(assetsNoAssetsIconInAssetsKey, [0, "universal", "splash"])
    ).toEqual("");
  });

  it("Protects incase of missing splash in universal key", () => {
    expect(
      verifyAssets(assetsNoAssetsIconValueInAssetsKey, [
        0,
        "universal",
        "splash"
      ])
    ).toEqual("");
  });

  it("Protects incase of missing splash in universal key", () => {
    expect(verifyAssets(correctSplash, [0, "universal", "splash"])).toEqual(
      "https://assets-secure.applicaster.com/myLogo.png"
    );
  });
});
