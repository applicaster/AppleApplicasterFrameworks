import * as R from "ramda";
import { useLocation, useHistory } from "react-router-dom";

import { createQuickBrickApp } from "@applicaster/quick-brick-core";
import * as QuickBrickManager from "@applicaster/zapp-react-native-bridge/QuickBrick";
import * as Contexts from "@applicaster/zapp-react-dom-ui-components/Contexts";

import { ZappDomRouter } from "./App/Router";
import { Layout } from "./App/Layout";
import { withAppLoader } from "./App/Loader/withAppLoader";
import { appLoader } from "./App/Loader";

import { withInteractionManager } from "./App/InteractionManager";
import "./main.css";

export const ZappApp = createQuickBrickApp({
  navigations: {
    Router: ZappDomRouter,
    useLocation,
    useHistory,
  },
  QuickBrickManager,
  Layout: withAppLoader(Layout),
  InteractionManager: withInteractionManager,
  appLoader,
  ContextProviders: R.map(R.prop("withProvider"), R.values(Contexts)),
});
