import React from "react";
import { shallow } from "enzyme";
import { shallowToJson } from "enzyme-to-json";

import { ScreenResolver } from "@applicaster/zapp-react-native-ui-components/Components/ScreenResolver";

jest.mock("@applicaster/zapp-react-native-utils/reactHooks/navigation", () => ({
  useNavigation: jest.fn(() => ({
    routeData: jest.fn(() => ({ id: "A1234" })),
    currentRoute: "/river/A1234",
  })),
}));

const { RouteManager } = require("../index");

describe("<RouteManager />", () => {
  const wrapper = shallow(<RouteManager />);

  it("renders correctly", () => {
    expect(shallowToJson(wrapper)).toMatchSnapshot();
  });

  it("passes the correct props to ScreenResolver", () => {
    expect(wrapper.find(ScreenResolver).props()).toEqual({
      screenType: "river",
      screenId: "A1234",
      screenData: { id: "A1234" },
    });
  });
});
