import { pluginConfigurationsLoader } from "../index";

const pc1 = {
  plugin: {
    api: {},
    identifier: "pc1",
  },
  configuration_json: null,
};

const pc2 = {
  plugin: {
    api: {},
    identifier: "pc2",
  },
  configuration_json: { foo: "bar" },
};

const pluginConfigurations = [pc1, pc2];

describe("pluginConfigurationsLoader", () => {
  it("transforms the plugin configurations properly", () => {
    const result = pluginConfigurationsLoader(pluginConfigurations);

    expect(result).toEqual(
      expect.objectContaining({
        pc1,
        pc2,
      })
    );
  });

  it("returns an empty object if there are no plugin configurations", () => {
    const result = pluginConfigurationsLoader([]);
    expect(result).toEqual({});
  });
});
