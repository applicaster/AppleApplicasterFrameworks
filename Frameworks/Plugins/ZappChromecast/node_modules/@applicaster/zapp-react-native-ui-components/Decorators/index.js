// @flow
import { zappPipesDataConnector } from "./ZappPipesDataConnector";
import * as R from "ramda";
import type {
  ZappComponent,
  ZappDecorator,
} from "@applicaster/zapp-react-native-flow-types";

import { withNavigator } from "../Decorators/Navigator";

const decoratorsMap: { [string]: ZappDecorator } = {
  withNavigator,
  zappPipes: zappPipesDataConnector,
};

const defaultDecorators = R.keys(decoratorsMap);

export function applyDecorators(
  Component: ZappComponent,
  decorators: Array<string> = defaultDecorators
): ZappComponent {
  // $FlowFixMe
  return R.compose(...R.map(R.prop(R.__, decoratorsMap), decorators))(
    Component
  );
}
