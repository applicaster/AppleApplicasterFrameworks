import * as R from "ramda";
import * as React from "react";
import { Transitioner } from "@applicaster/zapp-react-native-ui-components/Components/Transitioner";
import { transitionConfig } from "@applicaster/zapp-react-native-ui-components/Components/Transitioner/config";
import { connectToStore } from "@applicaster/zapp-react-native-redux";
import { MenuToggleContext } from "@applicaster/zapp-react-native-ui-components/Contexts";
import { withNavigator } from "@applicaster/zapp-react-native-ui-components/Decorators/Navigator";

import { LayoutComponent } from "./Layout";

const reduxConnector = connectToStore(
  R.pick(["components", "plugins", "rivers", "appState"])
);

const withTransitioner = Component => props => (
  <Transitioner transitionConfig={transitionConfig}>
    <Component {...props} />
  </Transitioner>
);

export const Layout = R.compose(
  withTransitioner,
  MenuToggleContext.withConsumer,
  reduxConnector,
  withNavigator
)(LayoutComponent);
