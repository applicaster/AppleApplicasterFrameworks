import * as R from "ramda";
import { actionCreator } from "../helpers";

const initialState = {
  appReady: false,
  appState: {
    isAvailable: null,
    currentState: null,
    nextState: null,
    eventType: null,
  },
};

export const SET_APP_READY = "SET_APP_READY";
export const SET_APP_NOT_READY = "SET_APP_NOT_READY";
export const SET_APP_STATE = "SET_APP_STATE";

export function setAppReady() {
  return actionCreator(SET_APP_READY);
}

export function setAppNotReady() {
  return actionCreator(SET_APP_NOT_READY);
}

export function setAppState(payload) {
  return actionCreator(SET_APP_STATE, payload);
}

export function appState(state = initialState, { type, payload }) {
  switch (type) {
    case SET_APP_READY:
      return R.merge(state, { appReady: true });
    case SET_APP_NOT_READY:
      return R.merge(state, { appReady: false });
    case SET_APP_STATE:
      return R.merge(state, { appState: payload });
    default:
      return state;
  }
}
