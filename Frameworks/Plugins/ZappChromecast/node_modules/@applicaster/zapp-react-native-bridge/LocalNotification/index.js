import { NativeModules } from "react-native";

// eslint-disable-next-line prefer-promise-reject-errors
const nullPromise = () => Promise.reject("Local Notification bridge is null");
const defaultLocalNotification = {
  cancelLocalNotifications: nullPromise,
  presentLocalNotification: nullPromise,
};

const { LocalNotificationBridge = defaultLocalNotification } = NativeModules;

export const localNotificationBridge = {
  /**
   * Unregister local notification.
   * @param  {Array<String>} identifiers Array of identifiers to cancel local notifications
   * @return {Promise<Boolean>} response promise
   */
  async cancelLocalNotifications(identifiers) {
    try {
      return LocalNotificationBridge.cancelLocalNotifications(identifiers);
    } catch (e) {
      throw e;
    }
  },

  /**
   * Schedule local notification with payload data.
   * @param  {Object} payload Object of payload data with local notification customization params
   * @return {Promise<Boolean>} response promise
   */
  async presentLocalNotification(payload) {
    try {
      return LocalNotificationBridge.presentLocalNotification(payload);
    } catch (e) {
      throw e;
    }
  },
};
