import * as R from "ramda";

import { providePlugins } from "@applicaster/zapp-react-native-utils/analyticsUtils/manager";
import { sendLaunchEvent } from "@applicaster/zapp-react-native-utils/analyticsUtils";

export function loadAnalyticsPlugins(plugins, pluginConfigurations) {
  const analyticPlugins = R.filter(R.propEq("type", "analytics"), plugins);

  return new Promise(resolve => {
    providePlugins(analyticPlugins, pluginConfigurations, () => {
      sendLaunchEvent();
      resolve();
    });
  });
}
