let timers = [];

export const registerTimer = (timersArray, timer) => {
  timersArray.push(timer);
  return timersArray;
};

export const killAllTimers = () => {
  timers.map((i, item) => {
    clearTimeout(i);
  });
  timers = [];
  return timers;
};

export const createTimer = (
  functionToBeCalled,
  millisecondsBeforeDisplayStateChange,
  displayStateToEnter
) => {
  let t = setTimeout(function() {
    functionToBeCalled(displayStateToEnter);
  }, millisecondsBeforeDisplayStateChange);

  return t;
};

export const transitionsBroker = (func, state, time) => {
  killAllTimers(); // as timers are managed by the window

  return (timers = registerTimer(timers, createTimer(func, time, state)));
};
