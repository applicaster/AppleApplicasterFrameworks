import React from "react";
import { Text, View, Animated } from "react-native";
import { NotificationView, onlinePhrase, offlinePhrase } from "../";
import { shallow } from "enzyme";
import renderer from "react-test-renderer";

jest.useFakeTimers();
describe("NotificationView", () => {
  it("renders", () => {
    shallow(<NotificationView />);
  });
  it("Show online message when Online", () => {
    const component = renderer.create(<NotificationView online />);
    expect(component.root.findByType(Text).props.children).toBe(onlinePhrase);
  });
  it("Show offline message when Online", () => {
    const component = renderer.create(<NotificationView online={false} />);
    expect(component.root.findByType(Text).props.children).toBe(offlinePhrase);
  });
  it("When hidden is set to true notification is invisible", () => {
    const component = renderer.create(
      <NotificationView online={false} hidden={true} />
    );
    const animatedViewStyles = component.root
      .findByType(View)
      .children[0].findByType(View).instance.props.style;

    expect(animatedViewStyles.opacity).toBe(0);
    expect(animatedViewStyles.transform[0].translateY).toBeOneOf([36, 70]);
  });
  it("When hidden is false to true notification is visible", () => {
    const component = renderer.create(
      <NotificationView online={false} hidden={false} />
    );
    component.update(<NotificationView online={false} hidden={false} />);
    const animatedViewStyles = component.root.findByType(Animated.View).instance
      .props.style;
    expect(animatedViewStyles.opacity).toBe(1);
  });
});
